{% extends 'base.html.twig' %}

{%  block body %}
    <div class="row flex-grow-1">
        <div class="container bg-orange-light shadow question-content">
            <div class="row m-2 p-2 bg-light orange-text" style="min-height: 50%">
                <div class="col-12 align-self-start">
                    <h4>Question:</h4>
                    <hr class="mt-3 mb-0">
                </div>
                <div class="col-12 align-self-center">
                    <p>{{ question }}</p>
                </div>
                <div class="col-12 align-self-end"></div>
            </div>
            <div class="row m-2 p-2 py-4 bg-light">
                <div class="col">
                    <form action="{{formUrl}}" target="result" method="get">
                        <div class="row">
                        {% for answer in answers %}
                            <div class="col-sm-12 col-md-6 col-lg-3">
                                <input class="sr-only" type="radio" id="{{answer.id}}" name="{{answer.question}}" value="{{answer.id}}" >
                                <label class="btn btn-orange orange-border w-100 orange-text" for="{{answer.id}}">{{answer.answerText}}</label>
                            </div>
                        {% endfor %}
                        </div>
                        <hr class="mt-3 mb-4">
                        <div class="row">
                            <div class="col-sm-12 col-md-6 col-lg-3">
                                <p><button class="btn btn-outline-secondary w-100" type="submit" value="Submit"><span class="material-icons">done_outline</span> Submit</button></p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

 <script type="text/javascript">
const eventSource = new EventSource('http://localhost:3000/.well-known/mercure?topic=' + encodeURIComponent('{{listenerUrl}}'));
eventSource.onmessage = event => {
    // Will be called every time an update is published by the server
    console.log(JSON.parse(event.data));
	location.reload();
}
  </script>
{% endblock %}